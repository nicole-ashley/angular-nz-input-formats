/*!
 * angular-nz-input-formats
 * Angular directives to validate and format NZ-specific input types
 * @version v0.2.1
 * @link https://github.com/nikrolls/angular-nz-input-formats
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e){var i;!function(t){t.module=e.module("nzInputFormats",[])}(i||(i={}));var i;!function(t){var i=function(){function t(t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.require="ngModel",this.restrict="A",this.link=null,this.directiveName="nzSimpleInputMask",this.options={mask:null},this.mask=null,this.maskChars={"*":/./,A:/[A-Za-z]/,9:/[0-9]/},this.scope=null,this.elem=null,this.ctrl=null,this.document=null,this.lastLen=0,this.setMask(t),i&&(this.maskChars=i),this.link=e.bind(this,this.doLink)}return t.prototype.setMask=function(t){t!==this.options.mask&&(this.mask=t.split(""),this.options.mask=t,this.elem&&this.parser(this.elem.val()))},t.Directive=function(e,i){return void 0===i&&(i=t),t.Document=e[0],{require:"ngModel",restrict:"A",link:function(e,r,s,n,a){var o=new i;return o.document=t.Document,o.doLink(e,r,s,n,a)}}},t.prototype.doLink=function(t,i,r,s){this.scope=t,this.elem=i,this.ctrl=s,r.$observe(this.directiveName,e.bind(this,this.processAttributeValue)),s.$formatters.push(e.bind(this,this.formatter)),s.$parsers.push(e.bind(this,this.parser))},t.prototype.processAttributeValue=function(t){var i=this.scope.$eval(t);i&&(i.mask&&this.setMask(i.mask),this.options=e.extend(this.options,i),e.isFunction(this.ctrl.$$parseAndValidate)?this.ctrl.$$parseAndValidate():this.ctrl.$setViewValue(this.ctrl.$viewValue))},t.prototype.formatter=function(t){var e=this;if(void 0===t&&(t=""),!this.mask)return t;t=String(t);var i="",r=0;return this.mask.some(function(s){return r>=t.length?!0:void(i+=e.maskChars.hasOwnProperty(s)?t.charAt(r++):s)}),i},t.prototype.parser=function(t){var i=this;if(void 0===t&&(t=""),!this.mask)return t;var r=(t||"").split(""),s=t.length,n=[],a=this.elem[0];this.mask.every(function(t){var e=r[0];if(i.maskChars.hasOwnProperty(t)){for(;r.length&&!r[0].match(i.maskChars[t]);)r.shift();r.length&&n.push(r.shift())}else e===t&&r.shift();return r.length>0});var o=n.join(""),h=this.formatter(o),l=a.selectionStart;if(s>this.lastLen){var u=this.mask[l-1],c=this.maskChars.hasOwnProperty(u);if(c)t.charAt(l-1).match(this.maskChars[u])||l--;else for(;l<h.length&&!this.maskChars.hasOwnProperty(this.mask[l-1]);)l++}if(this.lastLen=h.length,this.elem.val(h),this.ctrl.$viewValue=h,this.ctrl.$render(),this.document.activeElement===a&&(a.selectionStart=a.selectionEnd=l),!e.isArray(this.ctrl.$validators)){var m=this.validator();if(this.ctrl.$setValidity(this.directiveName,m),!m)return""}return o},t.prototype.validator=function(){return"undefined"==typeof this.ctrl.$viewValue||""===this.ctrl.$viewValue?!0:this.mask?this.ctrl.$viewValue.length===this.mask.length:!0},t.Document=null,t}();t.SimpleInputMask=i,t.module.directive("nzSimpleInputMask",["$document",i.Directive])}(i||(i={}));var i,r=this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(e){function i(){e.call(this),this.shortMask="99-9999-9999999-99",this.longMask="99-9999-9999999-999",this.directiveName="nzBankNumber",this.options={mask:null,strict:!1},this.prefixes={"01":{from:1,to:5699},12:{from:3e3,to:3499},"02":{from:1,to:1299},31:{from:2800,to:2849},25:{from:2500,to:2599},30:{from:2900,to:2956},38:{from:9e3,to:9499},"08":{from:0,to:9999},"06":{from:1,to:1499},11:{from:5e3,to:8999},21:{from:4800,to:4899},15:{from:3900,to:3999},18:{from:3500,to:3599},16:{from:4400,to:4499},20:{from:4100,to:4199},14:{from:4700,to:4799},13:{from:4900,to:4799},19:{from:4600,to:4649},17:{from:3300,to:3399},22:{from:4e3,to:4049},23:{from:3700,to:3799},29:{from:0,to:9999},24:{from:4300,to:4349},"03":{from:1,to:1999}},this.setMask(this.shortMask)}return r(i,e),i.Directive=function(e){return t.SimpleInputMask.Directive(e,i)},i.prototype.parser=function(t){this.setMask(t.replace(/\D/g,"").length<=15?this.shortMask:this.longMask);var i=e.prototype.parser.call(this,t);return 15===i.length&&(i=i.substr(0,13)+"0"+i.substr(-2)),i},i.prototype.validator=function(){var t=e.prototype.validator.call(this);if(!this.options.strict)return t;var i=this.ctrl.$viewValue;if("undefined"===i||""===i)return!0;if(i=i.replace(/\D/g,""),i.length<15||i.length>16)return!1;var r=i.substr(0,2);if(this.prefixes.hasOwnProperty(r)){var s=this.prefixes[r],n=i.substr(2,4);if(4===n.length){var a=Number(n);return t&&a>=s.from&&a<=s.to}}return!1},i}(t.SimpleInputMask);t.NZBankNumber=e,t.module.directive("nzBankNumber",["$document",e.Directive])}(i||(i={}));var i,r=this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(e){function i(){e.call(this),this.shortMask="99-999-999",this.longMask="999-999-999",this.directiveName="nzIrdNumber",this.setMask(this.shortMask)}return r(i,e),i.Directive=function(e){return t.SimpleInputMask.Directive(e,i)},i.prototype.parser=function(t){return this.setMask(t.replace(/\D/g,"").length<=8?this.shortMask:this.longMask),e.prototype.parser.call(this,t)},i.prototype.validator=function(){if("undefined"==typeof this.ctrl.$viewValue||""===this.ctrl.$viewValue)return!0;var t=i.Extract(this.ctrl.$viewValue);if(!t)return!1;if(!i.CheckValidRange(t))return!1;var e=t.substr(0,8);return i.CalculateCheckDigit(e,t.substr(-1))},i.Extract=function(t){var e=String(t).trim().match(/(?:\d{8,9}|\d{2,3}-\d{3}-\d{3})/);return e&&e.length?("0"+e[0].replace(/-/g,"")).substr(-9):null},i.CheckValidRange=function(t){var e=Number(t);return e>=1e7&&15e7>=e},i.CalculateCheckDigit=function(t,e){var r=[3,2,7,6,5,4,3,2],s=i.CalculateCheckDigitFor(r,t);return 10===s?i.ReCalculateCheckDigit(t,e):s===Number(e)},i.ReCalculateCheckDigit=function(t,e){var r=[7,4,3,2,5,2,7,6],s=i.CalculateCheckDigitFor(r,t);return 10===s?!1:s===Number(e)},i.CalculateCheckDigitFor=function(t,e){for(var i=0,r=0;r<t.length;r++)i+=Number(e.charAt(r))*t[r];var s=i%11;return 0===s?0:11-s},i}(t.SimpleInputMask);t.NZIrdNumber=e,t.module.directive("nzIrdNumber",["$document",e.Directive])}(i||(i={}));var i,r=this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i};!function(t){var i=function(i){function s(){i.call(this),this.defaultMask="9999999999999",this.mobileMask="999 999 999999",this.intlMobileMask="9999 999 999999",this.landlineMask="99 999 9999",this.intlLandlineMask="999 999 9999",this.specialMask="9999 999 999 9999",this.intlSpecialMask="99999 999 999 9999",this.directiveName="nzPhoneNumber",this.minLength=0,this.setMask(this.defaultMask)}return r(s,i),s.Directive=function(e){return t.SimpleInputMask.Directive(e,s)},s.prototype.formatter=function(t){if("undefined"==typeof t||null===t||""===t)return t;var r=s.sanitise(t);e.isDefined(this.options.intl)&&(r=this.options.intl?r.match(/^(?:64.*|6)?/)[0]:r.match(/^(?:0.*)?/)[0]);var n=r.match(/^(64|6$)/);n&&(r="0"+r.substr(2));var a;switch(r.match(/^0[89]0/)?(a="special",this.setMask(n?this.intlSpecialMask:this.specialMask),this.minLength=n?11:10):"02"===r.substr(0,2)?(a="mobile",this.setMask(n?this.intlMobileMask:this.mobileMask),this.minLength=n?10:9):r.match(/^0[345679]/)?(a="landline",this.setMask(n?this.intlLandlineMask:this.landlineMask),this.minLength=n?10:9):(a="other",this.setMask(this.defaultMask),this.minLength=9),this.options.type){case"special":r=r.match(/^(?:0[89]0.*|0[89]|0)?/)[0];break;case"mobile":r=r.match(/^(?:02[1257].*|02|0)?/)[0];break;case"landline":r=r.match(/^(?:0[345679].*|0)?/)[0]}return t=n?r.replace(/^0/,n[0]):r,i.prototype.formatter.call(this,t)},s.prototype.validator=function(){var t=s.sanitise(this.ctrl.$viewValue);return 0===t.length||t.length>=this.minLength},s.sanitise=function(t){return String(t).replace(/\D/g,"")},s}(t.SimpleInputMask);t.NZPhoneNumber=i,t.module.directive("nzPhoneNumber",["$document",i.Directive])}(i||(i={}))}(window,window.angular);
//# sourceMappingURL=angular-nz-input-formats.min.js.map